# お菓子キャッチゲーム構造図と概要

## プロジェクト構造
```
src/
├── components/
│   ├── GameContainer.js
│   ├── GameArea.js
│   ├── GameInfo.js
│   ├── ControlButtons.js
│   ├── Player.js
│   ├── Enemy.js
│   ├── Plate.js
│   └── GameOver.js
├── hooks/
│   └── useGameLoop.js
├── utils/
│   ├── calorieUtils.js
│   └── utils.js
├── constants.js
├── App.js
└── App.css
```

## コンポーネントと役割

1. App.js:
   - アプリケーションのメインコンポーネント
   - ゲームの状態（プレイ中/ゲームオーバー）を管理
   - GameContainerとGameOverコンポーネントの切り替えを制御

2. GameContainer.js:
   - ゲーム画面全体のレイアウトを管理
   - GameArea、GameInfo、ControlButtonsコンポーネントを含む
   - キーボード入力のイベントリスナーを設定

3. GameArea.js:
   - ゲームの主要な描画領域
   - Player、Enemy、Plateコンポーネントを配置

4. GameInfo.js:
   - スコアと残り時間を表示

5. ControlButtons.js:
   - 移動と皿発射のボタンを表示
   - タッチデバイス用の操作インターフェース

6. Player.js:
   - うさぎ（プレイヤー）キャラクターを描画
   - プレイヤーの位置を反映

7. Enemy.js:
   - お菓子（敵）キャラクターを描画
   - 個々の敵の位置と種類を管理

8. Plate.js:
   - 発射される皿を描画
   - 個々の皿の位置を管理

9. GameOver.js:
   - ゲーム終了画面を表示
   - 最終スコア、消費カロリー、運動提案を表示
   - リスタートボタンを提供

10. useGameLoop.js (カスタムフック):
    - ゲームのメインロジックを管理
    - プレイヤーの移動、敵の生成と移動、皿の発射と移動、衝突判定を処理
    - ゲームの状態（プレイヤー位置、敵の位置、スコアなど）を管理

11. constants.js:
    - ゲーム全体で使用される定数を定義（サイズ、速度、カロリー情報など）

12. calorieUtils.js:
    - カロリーから運動量を計算する関数を提供

13. utils.js:
    - 衝突判定などの共通関数を提供

## ゲームの主な機能
- うさぎ（プレイヤー）の左右移動：キーボードまたは画面上のボタンで制御
- 皿の発射：スペースキーまたは画面上のボタンで制御
- お菓子（敵）の落下：ランダムな位置から一定間隔で生成
- スコアとカロリーの計算：お菓子を捕まえるたびに更新
- 時間制限：30秒のカウントダウン
- ゲーム終了時の運動提案：消費したカロリーに基づいて表示

## 最近の改善点
- プレイヤーの移動をスムーズに変更（連続的な動き）
- 皿の発射をより即座に反応するように最適化
- 日本語のゲームオーバー画面の実装
- カロリー計算機能と運動提案機能の追加

この構造図と概要を使用して、新しいチャットセッションでゲームの開発を継続できます。各コンポーネントの役割と相互作用を理解することで、新機能の追加や既存機能の改善がしやすくなります。
